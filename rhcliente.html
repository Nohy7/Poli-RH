<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>WebSocket CRUD Example</title>
</head>
<body>
    <h1>WebSocket CRUD Example</h1>

    <button onclick='crearEmpleado()'>Crear Empleado</button>
    <button onclick='consultarEmpleadoPorId(11)'>Consultar Empleado por ID</button>
    
    <script>
        const socket = new WebSocket('ws://localhost:8080/poli-rh');

        socket.addEventListener('open', (event) => {
            console.log('Conexión establecida con el servidor WebSocket');
        });

        socket.addEventListener('message', (event) => {
            const message = JSON.parse(event.data);
            console.log('Mensaje recibido:', message);

            
        });

        socket.addEventListener('close', (event) => {
            console.log('Conexión cerrada con el servidor WebSocket');
        });

        socket.addEventListener('error', (event) => {
            console.error('Error en la conexión WebSocket:', event);
        });

        function crearEmpleado() {
            const accion = 'CREAR_EMPLEADO';
            const datos = {
                emplId: 10,
                emplPrimerNombre: 'John',
                emplSegundoNombre: 'Doe',
                emplEmail: 'john.doe3@example.com',
                emplFechaNacimiento: '1990-01-01',
                emplSueldo: 50000,
                emplComision: 1000,
                emplCargoId: null,
                emplGerenteId: null,
                emplDptoId: null
            };

            const mensaje = { accion, datos };
            socket.send(JSON.stringify(mensaje));
        }

        function consultarEmpleadoPorId(id) {
            const accion = 'CONSULTAR_EMPLEADO';
            const datos = "" + id;

            const mensaje = { accion, datos };
            socket.send(JSON.stringify(mensaje));
        }

        // Otros métodos CRUD similares...

        window.addEventListener('beforeunload', () => {
            socket.close();
        });
    </script>
</body>
</html>
